---
import { Menu, X } from "@lucide/astro";
import LogoIcon from "./LogoIcon.astro";
import NavItem from "./navItem.astro";
---

<nav
  class="nav border-border bg-background/80 sticky top-0 z-50 h-16 border-b backdrop-blur-md"
>
  <div
    class="mx-auto flex h-full max-w-7xl items-center justify-between px-1 md:px-10"
  >
    <!-- Logo -->
    <a href="#Home" class="flex items-center gap-2">
      <LogoIcon class="h-10 w-10" />
      <span class="text-xl font-bold">
        Tele<span class="text-accent">pro</span>
      </span>
    </a>

    <!-- Desktop Navigation -->
    <div class="hidden md:block">
      <ul class="flex items-center gap-6">
        <NavItem href="#Home">Inicio</NavItem>
        <NavItem href="#Services">Servicios</NavItem>
        <NavItem href="#About">Sobre Nosotros</NavItem>
        <NavItem href="#Contact">Contacto</NavItem>
      </ul>
    </div>
  </div>

  <!-- Mobile Menu Button -->
  <button
    id="mobile-menu-toggle"
    class="text-foreground p-2 focus:outline-none md:hidden"
  >
    <Menu id="menu-icon" class="h-6 w-6" />
    <X id="close-icon" class="hidden h-6 w-6" />
  </button>
</nav>

<!-- Mobile Menu -->
<div
  id="mobile-menu"
  class="bg-background border-border absolute top-16 left-0 z-40 hidden w-full border-b shadow-lg md:hidden"
>
  <ul class="flex flex-col space-y-4 p-4">
    <li>
      <a
        href="#Home"
        class="mobile-link hover:text-accent block text-lg font-medium"
        >Inicio</a
      >
    </li>
    <li>
      <a
        href="#Services"
        class="mobile-link hover:text-accent block text-lg font-medium"
        >Servicios</a
      >
    </li>
    <li>
      <a
        href="#About"
        class="mobile-link hover:text-accent block text-lg font-medium"
        >Sobre Nosotros</a
      >
    </li>
    <li>
      <a
        href="#Contact"
        class="mobile-link hover:text-accent block text-lg font-medium"
        >Contacto</a
      >
    </li>
  </ul>
</div>

<script>
  const toggle = document.getElementById("mobile-menu-toggle");
  const menu = document.getElementById("mobile-menu");
  const menuIcon = document.getElementById("menu-icon");
  const closeIcon = document.getElementById("close-icon");
  const links = document.querySelectorAll(".mobile-link");

  function toggleMenu() {
    const isHidden = menu?.classList.contains("hidden");
    if (isHidden) {
      menu?.classList.remove("hidden");
      menuIcon?.classList.add("hidden");
      closeIcon?.classList.remove("hidden");
    } else {
      menu?.classList.add("hidden");
      menuIcon?.classList.remove("hidden");
      closeIcon?.classList.add("hidden");
    }
  }

  toggle?.addEventListener("click", toggleMenu);
  links.forEach((link) =>
    link.addEventListener("click", () => {
      menu?.classList.add("hidden");
      menuIcon?.classList.remove("hidden");
      closeIcon?.classList.add("hidden");
    }),
  );
</script>
